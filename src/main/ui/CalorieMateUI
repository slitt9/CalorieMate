package ui;

import model.Meal;
import model.FoodItem;
import java.util.Scanner;

public class CalorieMateUI {

    private Meal breakfast;
    private Meal lunch;
    private Meal dinner;
    private Meal snacks;
    private Scanner scanner;

    // Constructor to initialize meals and the scanner
    public CalorieMateUI() {
        breakfast = new Meal("breakfast");
        lunch = new Meal("lunch");
        dinner = new Meal("dinner");
        snacks = new Meal("snacks");
        scanner = new Scanner(System.in);
    }

    // Run the console-based application
    public void run() {
        boolean keepRunning = true;
        while (keepRunning) {
            printMenu();
            String command = scanner.nextLine().toLowerCase();

            switch (command) {
                case "1":
                    addFoodItem();
                    break;
                case "2":
                    viewFoodItems();
                    break;
                case "3":
                    removeFoodItem();
                    break;
                case "4":
                    calculateRemainingCalories();
                    break;
                case "5":
                    keepRunning = false;
                    System.out.println("Exiting application. Goodbye!");
                    break;
                default:
                    System.out.println("Invalid command. Please choose a valid option.");
            }
        }
    }

    // Prints the available actions to the user
    private void printMenu() {
        System.out.println("\nChoose an option:");
        System.out.println("1 - Add a food item");
        System.out.println("2 - View logged food items");
        System.out.println("3 - Remove a food item");
        System.out.println("4 - View remaining calories for the day");
        System.out.println("5 - Exit");
    }

    // Allows user to add a food item under a specific meal
    public void addFoodItem() {
        String mealType;
        while (true) {
            System.out.println("Enter the meal type (breakfast, lunch, dinner, snacks): ");
            mealType = scanner.nextLine().toLowerCase();

            if (mealType.equals("breakfast") || mealType.equals("lunch") || mealType.equals("dinner") || mealType.equals("snacks")) {
                break;
            } else {
                System.out.println("Invalid meal type. Please enter breakfast, lunch, dinner, or snacks.");
            }
        }

        System.out.println("Enter food item name: ");
        String foodName = scanner.nextLine();
        System.out.println("Enter calories for the item: ");
        double calories = scanner.nextDouble();
        scanner.nextLine(); // consume newline

        FoodItem foodItem = new FoodItem(foodName, calories);

        // Add food item to the appropriate meal
        switch (mealType) {
            case "breakfast":
                breakfast.addFoodItem(foodItem);
                break;
            case "lunch":
                lunch.addFoodItem(foodItem);
                break;
            case "dinner":
                dinner.addFoodItem(foodItem);
        }
    }

    public static void main(String[] args) {
        CalorieMateUI app = new CalorieMateUI();
        app.run(); 
    }
}

